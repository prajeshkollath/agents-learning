<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>((r) => {
          setTimeout(r);
        })(() => {
  const { markmap, mm } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute("style", "position:absolute;bottom:20px;right:20px");
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"Context Engineering","children":[{"content":"The Problem","children":[{"content":"Limited Context Windows","children":[{"content":"LLMs have token limits","children":[],"payload":{"tag":"li","lines":"4,5"}},{"content":"200k, 500k tokens max","children":[],"payload":{"tag":"li","lines":"5,6"}}],"payload":{"tag":"h3","lines":"3,4"}},{"content":"Unlimited Conversations","children":[{"content":"History grows with each turn","children":[],"payload":{"tag":"li","lines":"7,8"}},{"content":"Token cost increases linearly","children":[],"payload":{"tag":"li","lines":"8,9"}}],"payload":{"tag":"h3","lines":"6,7"}},{"content":"Result","children":[{"content":"Eventually hit limits","children":[],"payload":{"tag":"li","lines":"10,11"}},{"content":"Costs become prohibitive","children":[],"payload":{"tag":"li","lines":"11,12"}},{"content":"Need smart management","children":[],"payload":{"tag":"li","lines":"12,14"}}],"payload":{"tag":"h3","lines":"9,10"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"Core Strategies","children":[{"content":"1. Sliding Window","children":[{"content":"Definition","children":[{"content":"Keep last N turns only","children":[],"payload":{"tag":"li","lines":"18,19"}},{"content":"Discard everything older","children":[],"payload":{"tag":"li","lines":"19,20"}}],"payload":{"tag":"h4","lines":"17,18"}},{"content":"Analogy","children":[{"content":"Moving camera","children":[],"payload":{"tag":"li","lines":"21,22"}},{"content":"Sees only current scene","children":[],"payload":{"tag":"li","lines":"22,23"}},{"content":"Past completely forgotten","children":[],"payload":{"tag":"li","lines":"23,24"}}],"payload":{"tag":"h4","lines":"20,21"}},{"content":"When to Use","children":[{"content":"Short-term memory sufficient","children":[],"payload":{"tag":"li","lines":"25,26"}},{"content":"Self-contained turns","children":[],"payload":{"tag":"li","lines":"26,27"}},{"content":"Predictable token costs needed","children":[],"payload":{"tag":"li","lines":"27,28"}}],"payload":{"tag":"h4","lines":"24,25"}},{"content":"Trade-offs","children":[{"content":"Simple implementation","children":[],"payload":{"tag":"li","lines":"29,30"}},{"content":"Fixed cost ceiling","children":[],"payload":{"tag":"li","lines":"30,31"}},{"content":"BUT: loses all old history","children":[],"payload":{"tag":"li","lines":"31,32"}},{"content":"May forget important context","children":[],"payload":{"tag":"li","lines":"32,34"}}],"payload":{"tag":"h4","lines":"28,29"}}],"payload":{"tag":"h3","lines":"16,17"}},{"content":"2. Selective Retention","children":[{"content":"Definition","children":[{"content":"Keep important info","children":[],"payload":{"tag":"li","lines":"36,37"}},{"content":"Drop filler content","children":[],"payload":{"tag":"li","lines":"37,38"}},{"content":"Rules-based decisions","children":[],"payload":{"tag":"li","lines":"38,39"}}],"payload":{"tag":"h4","lines":"35,36"}},{"content":"Analogy","children":[{"content":"Packing for trip","children":[],"payload":{"tag":"li","lines":"40,41"}},{"content":"Keep essentials","children":[],"payload":{"tag":"li","lines":"41,42"}},{"content":"Drop nice-to-haves","children":[],"payload":{"tag":"li","lines":"42,43"}}],"payload":{"tag":"h4","lines":"39,40"}},{"content":"Approaches","children":[{"content":"Structured Fields","children":[{"content":"Manual extraction","children":[],"payload":{"tag":"li","lines":"45,46"}},{"content":"Maintain specific data","children":[],"payload":{"tag":"li","lines":"46,47"}},{"content":"Name, role, preferences","children":[],"payload":{"tag":"li","lines":"47,48"}},{"content":"Project context","children":[],"payload":{"tag":"li","lines":"48,49"}}],"payload":{"tag":"h5","lines":"44,45"}},{"content":"Pattern Matching","children":[{"content":"Rule-based filtering","children":[],"payload":{"tag":"li","lines":"50,51"}},{"content":"Keep keywords: error, deadline","children":[],"payload":{"tag":"li","lines":"51,52"}},{"content":"Drop filler: thanks, ok","children":[],"payload":{"tag":"li","lines":"52,53"}}],"payload":{"tag":"h5","lines":"49,50"}},{"content":"LLM Extraction","children":[{"content":"Ask LLM for key facts","children":[],"payload":{"tag":"li","lines":"54,55"}},{"content":"Goals, requirements, decisions","children":[],"payload":{"tag":"li","lines":"55,56"}},{"content":"Dynamic extraction","children":[],"payload":{"tag":"li","lines":"56,57"}}],"payload":{"tag":"h5","lines":"53,54"}}],"payload":{"tag":"h4","lines":"43,44"}},{"content":"When to Use","children":[{"content":"Critical vs noise distinction","children":[],"payload":{"tag":"li","lines":"58,59"}},{"content":"Can define importance rules","children":[],"payload":{"tag":"li","lines":"59,60"}},{"content":"Need long-term memory","children":[],"payload":{"tag":"li","lines":"60,61"}}],"payload":{"tag":"h4","lines":"57,58"}},{"content":"Trade-offs","children":[{"content":"More control","children":[],"payload":{"tag":"li","lines":"62,63"}},{"content":"Retain critical info","children":[],"payload":{"tag":"li","lines":"63,64"}},{"content":"BUT: needs upfront design","children":[],"payload":{"tag":"li","lines":"64,65"}},{"content":"Can miss context if wrong","children":[],"payload":{"tag":"li","lines":"65,67"}}],"payload":{"tag":"h4","lines":"61,62"}}],"payload":{"tag":"h3","lines":"34,35"}},{"content":"3. Summarization","children":[{"content":"Definition","children":[{"content":"Compress old turns","children":[],"payload":{"tag":"li","lines":"69,70"}},{"content":"Keep recent turns full","children":[],"payload":{"tag":"li","lines":"70,71"}},{"content":"Lose detail, keep essence","children":[],"payload":{"tag":"li","lines":"71,72"}}],"payload":{"tag":"h4","lines":"68,69"}},{"content":"Analogy","children":[{"content":"Meeting notes","children":[],"payload":{"tag":"li","lines":"73,74"}},{"content":"Old meetings: summary","children":[],"payload":{"tag":"li","lines":"74,75"}},{"content":"Recent: full detail","children":[],"payload":{"tag":"li","lines":"75,76"}}],"payload":{"tag":"h4","lines":"72,73"}},{"content":"How It Works","children":[{"content":"Old turns &#x2192; summary","children":[],"payload":{"tag":"li","lines":"77,78"}},{"content":"Recent turns &#x2192; verbatim","children":[],"payload":{"tag":"li","lines":"78,79"}},{"content":"Balance history and detail","children":[],"payload":{"tag":"li","lines":"79,80"}}],"payload":{"tag":"h4","lines":"76,77"}},{"content":"When to Use","children":[{"content":"Long complex conversations","children":[],"payload":{"tag":"li","lines":"81,82"}},{"content":"Need history awareness","children":[],"payload":{"tag":"li","lines":"82,83"}},{"content":"Can afford summarization cost","children":[],"payload":{"tag":"li","lines":"83,84"}}],"payload":{"tag":"h4","lines":"80,81"}},{"content":"Trade-offs","children":[{"content":"Balances history + detail","children":[],"payload":{"tag":"li","lines":"85,86"}},{"content":"Natural approach","children":[],"payload":{"tag":"li","lines":"86,87"}},{"content":"BUT: loses nuance","children":[],"payload":{"tag":"li","lines":"87,88"}},{"content":"Extra LLM calls","children":[],"payload":{"tag":"li","lines":"88,89"}},{"content":"Compounds errors","children":[],"payload":{"tag":"li","lines":"89,91"}}],"payload":{"tag":"h4","lines":"84,85"}}],"payload":{"tag":"h3","lines":"67,68"}}],"payload":{"tag":"h2","lines":"14,15"}},{"content":"Choosing Strategy","children":[{"content":"Decision Matrix","children":[{"content":"Sliding Window","children":[{"content":"Best: short-term tasks","children":[],"payload":{"tag":"li","lines":"94,95"}},{"content":"Avoid: need long-term memory","children":[],"payload":{"tag":"li","lines":"95,96"}}],"payload":{"tag":"h4","lines":"93,94"}},{"content":"Selective Retention","children":[{"content":"Best: tracking specific facts","children":[],"payload":{"tag":"li","lines":"97,98"}},{"content":"Avoid: unknown importance upfront","children":[],"payload":{"tag":"li","lines":"98,99"}}],"payload":{"tag":"h4","lines":"96,97"}},{"content":"Summarization","children":[{"content":"Best: complex with history","children":[],"payload":{"tag":"li","lines":"100,101"}},{"content":"Avoid: need exact past details","children":[],"payload":{"tag":"li","lines":"101,103"}}],"payload":{"tag":"h4","lines":"99,100"}}],"payload":{"tag":"h3","lines":"92,93"}}],"payload":{"tag":"h2","lines":"91,92"}},{"content":"Hybrid Approaches","children":[{"content":"Combine All Three","children":[{"content":"Example Structure","children":[{"content":"Selective retention: user info, issues","children":[],"payload":{"tag":"li","lines":"106,107"}},{"content":"Summarization: old conversation summary","children":[],"payload":{"tag":"li","lines":"107,108"}},{"content":"Sliding window: last 5 turns verbatim","children":[],"payload":{"tag":"li","lines":"108,109"}}],"payload":{"tag":"h4","lines":"105,106"}}],"payload":{"tag":"h3","lines":"104,105"}},{"content":"Why It Works","children":[{"content":"Structured fields: critical facts","children":[],"payload":{"tag":"li","lines":"110,111"}},{"content":"Summary: historical context","children":[],"payload":{"tag":"li","lines":"111,112"}},{"content":"Recent turns: immediate flow","children":[],"payload":{"tag":"li","lines":"112,113"}}],"payload":{"tag":"h3","lines":"109,110"}},{"content":"Real-World Usage","children":[{"content":"Customer support agents","children":[],"payload":{"tag":"li","lines":"114,115"}},{"content":"Long-running projects","children":[],"payload":{"tag":"li","lines":"115,116"}},{"content":"Complex multi-turn tasks","children":[],"payload":{"tag":"li","lines":"116,118"}}],"payload":{"tag":"h3","lines":"113,114"}}],"payload":{"tag":"h2","lines":"103,104"}},{"content":"Implementation Architecture","children":[{"content":"Agent Prompts","children":[{"content":"Purpose","children":[{"content":"Define behavior and role","children":[],"payload":{"tag":"li","lines":"121,122"}},{"content":"Set tone and style","children":[],"payload":{"tag":"li","lines":"122,123"}},{"content":"Establish rules","children":[],"payload":{"tag":"li","lines":"123,124"}}],"payload":{"tag":"h4","lines":"120,121"}},{"content":"Stays Constant","children":[{"content":"Not part of context engineering","children":[],"payload":{"tag":"li","lines":"125,126"}},{"content":"System-level instruction","children":[],"payload":{"tag":"li","lines":"126,127"}}],"payload":{"tag":"h4","lines":"124,125"}}],"payload":{"tag":"h3","lines":"119,120"}},{"content":"Orchestrator","children":[{"content":"Purpose","children":[{"content":"Manages conversation history","children":[],"payload":{"tag":"li","lines":"129,130"}},{"content":"Implements context strategy","children":[],"payload":{"tag":"li","lines":"130,131"}},{"content":"Decides what agent sees","children":[],"payload":{"tag":"li","lines":"131,132"}}],"payload":{"tag":"h4","lines":"128,129"}},{"content":"Operations","children":[{"content":"Summarize old turns","children":[],"payload":{"tag":"li","lines":"133,134"}},{"content":"Extract structured fields","children":[],"payload":{"tag":"li","lines":"134,135"}},{"content":"Apply sliding window","children":[],"payload":{"tag":"li","lines":"135,136"}},{"content":"Pass curated context","children":[],"payload":{"tag":"li","lines":"136,137"}}],"payload":{"tag":"h4","lines":"132,133"}}],"payload":{"tag":"h3","lines":"127,128"}},{"content":"Key Distinction","children":[{"content":"Agent prompt: HOW to behave","children":[],"payload":{"tag":"li","lines":"138,139"}},{"content":"Orchestrator: WHAT context to see","children":[],"payload":{"tag":"li","lines":"139,140"}},{"content":"Engineering at orchestrator level","children":[],"payload":{"tag":"li","lines":"140,142"}}],"payload":{"tag":"h3","lines":"137,138"}}],"payload":{"tag":"h2","lines":"118,119"}},{"content":"Token Cost Impact","children":[{"content":"Without Engineering","children":[{"content":"Turn 1: 100 tokens","children":[],"payload":{"tag":"li","lines":"144,145"}},{"content":"Turn 2: 250 tokens","children":[],"payload":{"tag":"li","lines":"145,146"}},{"content":"Turn 10: 2000+ tokens","children":[],"payload":{"tag":"li","lines":"146,147"}},{"content":"Linear growth","children":[],"payload":{"tag":"li","lines":"147,148"}}],"payload":{"tag":"h3","lines":"143,144"}},{"content":"With Sliding Window","children":[{"content":"Stabilizes after window size","children":[],"payload":{"tag":"li","lines":"149,150"}},{"content":"Fixed cost per turn","children":[],"payload":{"tag":"li","lines":"150,151"}},{"content":"Example: 450-500 tokens always","children":[],"payload":{"tag":"li","lines":"151,152"}}],"payload":{"tag":"h3","lines":"148,149"}},{"content":"With Summarization","children":[{"content":"Old turns compressed","children":[],"payload":{"tag":"li","lines":"153,154"}},{"content":"2000 tokens &#x2192; 200 token summary","children":[],"payload":{"tag":"li","lines":"154,155"}},{"content":"Recent turns: full detail","children":[],"payload":{"tag":"li","lines":"155,156"}},{"content":"Major savings","children":[],"payload":{"tag":"li","lines":"156,157"}}],"payload":{"tag":"h3","lines":"152,153"}},{"content":"Bottom Line","children":[{"content":"Direct cost control","children":[],"payload":{"tag":"li","lines":"158,159"}},{"content":"Enable longer conversations","children":[],"payload":{"tag":"li","lines":"159,160"}},{"content":"Scale sustainably","children":[],"payload":{"tag":"li","lines":"160,161"}}],"payload":{"tag":"h3","lines":"157,158"}}],"payload":{"tag":"h2","lines":"142,143"}}],"payload":{"tag":"h1","lines":"0,1"}},null)</script>
</body>
</html>
