flowchart TD
    Input[/"User Input"/]
    Router{"Router\n(Classify)"}

    Input --> Router

    Router -->|"Simple"| PathA["Haiku\n(Fast & Cheap)"]
    Router -->|"Medium"| PathB["Sonnet\n(Balanced)"]
    Router -->|"Complex"| PathC["Opus\n(Powerful)"]
    Router -->|"Needs Human"| PathD["Escalate\nto Human"]

    PathA --> ChainA["Chain A:\nFAQ Handler"]
    PathB --> ChainB["Chain B:\nTask Handler"]
    PathC --> ChainC["Chain C:\nReasoning Chain"]

    ChainA --> Gate1{"Gate:\nQuality OK?"}
    ChainB --> Gate2{"Gate:\nQuality OK?"}
    ChainC --> Gate3{"Gate:\nQuality OK?"}

    Gate1 -->|Yes| Output[/"Final Output"/]
    Gate2 -->|Yes| Output
    Gate3 -->|Yes| Output

    Gate1 -->|No| ChainA
    Gate2 -->|No| ChainB
    Gate3 -->|No| ChainC

    style Router fill:#f9a825,stroke:#f57f17,color:#000
    style Input fill:#e3f2fd,stroke:#1565c0,color:#000
    style Output fill:#e8f5e9,stroke:#2e7d32,color:#000
    style PathD fill:#ffcdd2,stroke:#c62828,color:#000
